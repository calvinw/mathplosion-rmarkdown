---
output:
  html_document:
params:
  a:
    input: numeric
    label: a 
    max: 3.5
    min: -3.5
    step: .1
    value: -1.2
  b:
    input: numeric
    label: b
    max: 3.5
    min: -3.5
    step: .1
    value: 2.1
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
a<-params$a
b<-params$b
library(ggplot2)
dnorm_limit <- function(x) {
 y <- dnorm(x)
 y[x < a | x > b] <- NA
 return(y)
}
```

## Area under normal curve between two values

We are going to find the area between the two z-values by using the standard normal (z) table:

Here $a =`r a`$ and $b =`r b`$

Here is a picture of the area that we want.

```{r area, echo=FALSE}
#change dev to svg if need to
dat <- data.frame(x=c(-3.5, 3.5))
ggplot(dat, aes(x=x)) +
stat_function(fun=dnorm_limit, geom="area", fill="blue", alpha=0.5) +
stat_function(fun=dnorm) +
labs(x = "Z", y = "") +
geom_hline(yintercept=0) +
scale_x_continuous(breaks = seq(-3, 3, by = 1.0)) +
scale_y_continuous(breaks = seq(0, .4, by = 0.2)) +
annotate("text", x = a, y = -0.01, label = sprintf("a = %s",a)) +
annotate("text", x = b, y = -0.01, label = sprintf("b = %s",b))
```

First we find the left tail area for z-value on the right: $b =`r b`$

$$
`r {
    areaB <- round(pnorm(b),4)
    sprintf("left tail area=%s",areaB)
   }`
$$

Then we find the left tail area for the z-value on the left $a =`r a`$:

$$
`r {
    areaA <- round(pnorm(a),4)
    sprintf("left tail area=%s",areaA)
   }`
$$

Finally we find the area between the two z-values by subtracting the left tail area up to b by the left tail area up to a. This leaves us with the area between the two z-values:

$$
`r {
    area <- round(areaB - areaA,4)
    sprintf("area between=%s-%s=%s",areaB,areaA,area)
   }`
$$
